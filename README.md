# Учебный проект Skypro.

## Создание виджета для банковских операций.

### Разработка серверной части виджета банковских операций.

#### __Директории и модули:__

### ***__src/masks.py__***
_Модуль для маскировки номера карты и/или номера счета._\
_Формат маскировки номера карты: XXXX XX** **** XXXX, где X - цифры номера счета._\
_Формат маскировки номера счета: **XXXX, где XXXX - последние 4 цифры номера счета._

__Функции:__
* get_mask_card_number(card_number) - возвращает маску введенного номера карты.\
Где (card_number) - 16-ти значный номер карты.
* get_mask_account(account_number) - возвращает маску введенного номера счета.\
Где (account_number) - 20-ти значный номер счета.

### ***__src/processing.py__***
_Модуль для сортировки словарей по ключу 'state' или упорядочиванию._\
_Формат сортировки: Принимает на вход список словарей с данными о банковских операциях._\
_Формат ответа: Возвращает новый список словарей или отсортированный по дате список._

__Функции:__
* sort_by_date(records, sort_option) - Сортирует список словарей по убыванию(default) или возрастанию.\
Где (sort_option) - True(default) или False, отвечает за направление сортировки (на убывание по умолчанию).
* filter_by_state(records, state) - Возвращает новый список словарей, у которых ключ state соответствует указанному значению.\
Где (state) - EXECUTED(default) or CANCELED.

### ***__src/widgets.py__***
_Модуль для маскировки номера карты и/или счета, изменениt формата даты._

__Функции:__
* mask_account_card(card) - Dозвращает маску введенного номера карты/счета.\
Где (card) - 16-ти значный номер карты или 20-ти значный номер счета.
* get_date(date_str) - Возвращает дату в формате ДД.ММ.ГГГГ.\
Где (date_str) - Строка с датой в формате "2024-03-11T02:26:18.671407".

### ***__src/generators.py__***
_Этот модуль содержит все функции, реализующие генераторы для обработки данных._

__Функции:__
* filter_by_currency(transactions, value) - принимает на вход список словарей, представляющих транзакции.\
Где (transactions, value) - Список словарей и параметр валюты.
* transaction_descriptions(transaction) - принимает список словарей с транзакциями и возвращает описание каждой операции по очереди\
Где (transaction) - Список словарей.
* card_number_generator(start, end) - По очереди выдает номера банковских карт в формате XXXX XXXX XXXX XXXX, где X — цифра номера карты.\
Где (start, stop) - Начало и конец генерации карт.

### ***__src/decorators.py__***
_Этот модуль содержит декораторы для функций._
* @log("file.txt") - декоратор записывающий результат работы функции в передаваемый файл или в консоль при отсутствии указания на файл.

### ***__src/utils.py__***
_Этот модуль содержит функцию для чтения JSON файлов._
* read_json_file(path_json) - где path_json - путь к файлу json. Возвращает список словарей.

### ***__src/external_api.py__***
_Этот модуль содержит функцию для конвертации валют в рубли с использованием стороннего сервиса._
* get_exchange(transaction) - где transaction - список словарей с операциями.

### ***__Тестирование__***
***tests/test_masks.py***
* test_get_mask_card_number(card_number, expected) - тесты для проверки работоспособности функции.\
Где (card_number, expected) - передаваемые данные и ожидаемый результат.
* test_get_mask_account(account_number, expected) - тесты для проверки работоспособности функции.\
Где (account_number, expected) - передаваемые данные и ожидаемый результат.

***tests/test_widget.py***
* test_mask_account_card(bank_account, expected) - тесты для проверки работоспособности функции.\
Где (bank_account, expected) - передаваемые данные и ожидаемый результат.
* test_get_date(date, expected) - тесты для проверки работоспособности функции.\
Где (account_number, expected) - передаваемые данные и ожидаемый результат.

***tests/test_processing.py***
* test_filter_by_state(list_dict, state_option, expected) - тесты для проверки работоспособности функции.\
Где (list_dict, state_option, expected) - передаваемые данные и ожидаемый результат.
* test_sort_by_date(list_dict, expected, sort_option) - тесты для проверки работоспособности функции.\
Где (list_dict, expected, sort_option) - передаваемые данные и ожидаемый результат.

***tests/test_filter_by_currency.py***
* Модуль содержащий группу тестов для проверки работоспособности функции.

***tests/test_card_number_generator.py***
* Модуль содержащий группу тестов для проверки работоспособности функции.

***tests/test_transaction_descriptions.py***
* Модуль содержащий группу тестов для проверки работоспособности функции.

***tests/conftest.py***
* Модуль содержащий фикстуры для оптимизации тестирования.

***tests/test_log.py***
* Модуль содержащий тесты декоратора log.

***tests/external_api.py***
* Модуль содержащий мок тесты функции get_exchange для конвертации валют.
